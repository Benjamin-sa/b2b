# B2B E-commerce Platform - Copilot Instructions

## Project Overview

This is a **B2B e-commerce platform** built with Vue 3 + TypeScript + Vite, using Firebase as the backend. The platform is designed for business-to-business sales with authentication-gated access and admin functionality.

## Key Architecture Principles

### Frontend-Only Architecture

- **No custom backend** - Firebase handles all backend needs
- **Vue 3 Composition API** with TypeScript for type safety
- **Vite** for fast development and building
- **Firebase services**: Authentication, Firestore, Storage, Functions (if needed)

### Authentication-First Approach

- **All content is protected** - users MUST login to see anything
- **Role-based access** - differentiate between regular users and admins
- **Firebase Auth** handles authentication flow

## Core Features & User Flows

### 1. Authentication System

- **Login/Register pages** - first thing users see
- **Protected routes** - redirect to login if not authenticated
- **Role-based access control** - admin vs regular user permissions
- **Logout functionality** with proper state cleanup

### 2. Admin Dashboard

**For admin users only** - comprehensive management interface:

- **Product Management**:
  - Add new products with images, descriptions, pricing
  - Edit existing products
  - Delete/archive products
  - Bulk operations
- **Order Management**:
  - View all orders with status tracking
  - Update order status (pending, processing, shipped, delivered)
  - Order details view with customer info
  - Export orders functionality
- **User Management**:
  - Add new B2B customers
  - View user list with contact details
  - Edit user permissions/roles
  - Deactivate/activate users

### 3. Customer Shopping Experience

**For authenticated regular users**:

- **Product Catalog** - browse all available products
- **Product Search & Filtering** - find products quickly
- **Shopping Cart** - add/remove items, quantity management
- **Checkout Process** - place orders with company details
- **Order History** - view past orders and status

## Technical Implementation Guidelines

### File Structure

```
src/
├── components/
│   ├── auth/          # Login, Register components
│   ├── admin/         # Admin dashboard components
│   ├── shop/          # Shopping components (catalog, cart, etc.)
│   ├── shared/        # Reusable UI components
│   └── layout/        # Layout components (header, sidebar, etc.)
├── views/             # Page-level components
├── composables/       # Vue composables for business logic
├── stores/            # Pinia stores for state management
├── types/             # TypeScript type definitions
├── utils/             # Utility functions
└── init/              # Firebase and other initialization
```

### Firebase Collections Structure

```
users/
├── {userId}/
│   ├── email: string
│   ├── role: 'admin' | 'customer'
│   ├── companyName: string
│   ├── contactInfo: object
│   └── isActive: boolean

products/
├── {productId}/
│   ├── name: string
│   ├── description: string
│   ├── price: number
│   ├── images: string[]
│   ├── category: string
│   ├── inStock: boolean
│   ├── createdAt: timestamp
│   └── updatedAt: timestamp

orders/
├── {orderId}/
│   ├── userId: string
│   ├── items: array
│   ├── totalAmount: number
│   ├── status: 'pending' | 'processing' | 'shipped' | 'delivered'
│   ├── orderDate: timestamp
│   └── shippingInfo: object
```

### State Management

- **Pinia stores** for global state
- **Auth store** - user authentication state, role checking
- **Product store** - product catalog, cart management
- **Admin store** - admin-specific operations

### UI/UX Best Practices

- **Responsive design** - works on desktop and tablet
- **Loading states** - show spinners during Firebase operations
- **Error handling** - user-friendly error messages
- **Toast notifications** - success/error feedback
- **Confirmation dialogs** - for destructive actions
- **Clean, professional design** - suitable for B2B context

### Image Handling with Firebase Storage

- **Upload to Firebase Storage** - organized folder structure
- **Optimize images** - compress before upload
- **Multiple image support** - product galleries
- **Secure download URLs** - temporary URLs for images
- **Image deletion cleanup** - remove unused images

### Security & Permissions

- **Firestore Security Rules** - protect data based on user roles
- **Admin-only operations** - server-side validation
- **Input validation** - sanitize all user inputs
- **Authentication guards** - protect routes and components

## Development Guidelines

### Code Style

- **TypeScript strict mode** - full type safety
- **Vue 3 Composition API** - prefer over Options API
- **Single File Components** with `<script setup>`
- **ESLint + Prettier** for code formatting
- **Descriptive naming** - clear component and function names

### Component Patterns

- **Composables for logic** - separate business logic from UI
- **Props with TypeScript interfaces** - type-safe component props
- **Emit events** - for component communication
- **Slots for flexibility** - reusable component patterns

### Firebase Integration

- **Error handling** - wrap Firebase calls in try/catch
- **Loading states** - show progress during operations
- **Optimistic updates** - update UI before Firebase confirms
- **Offline support** - handle network issues gracefully

### Performance Considerations

- **Lazy loading** - code splitting for routes
- **Image optimization** - WebP format, lazy loading
- **Firestore query optimization** - efficient queries with indexes
- **Caching strategies** - cache frequently accessed data

## When Building Features

### Always Consider:

1. **Authentication status** - is user logged in?
2. **User role** - admin vs customer permissions
3. **Loading states** - Firebase operations take time
4. **Error scenarios** - network issues, permission errors
5. **Mobile responsiveness** - B2B users often work on tablets
6. **Data validation** - both client and server-side
7. **User feedback** - success/error messages

### Testing Strategy

- **Manual testing** - core user flows work end-to-end
- **Error testing** - test network failures, invalid data
- **Permission testing** - ensure role-based access works
- **Cross-browser testing** - Chrome, Firefox, Safari compatibility

## Common Patterns & Examples

### Protected Route Pattern

```typescript
// Check authentication and redirect if needed
const { user, isAdmin } = useAuth();
if (!user.value) {
  router.push("/login");
}
```

### Firebase Operation Pattern

```typescript
const loading = ref(false);
const error = ref("");

const saveProduct = async (product: Product) => {
  loading.value = true;
  error.value = "";
  try {
    await addDoc(collection(db, "products"), product);
    // Success feedback
  } catch (err) {
    error.value = "Failed to save product";
  } finally {
    loading.value = false;
  }
};
```

### Admin Permission Check

```typescript
const { isAdmin } = useAuth();
if (!isAdmin.value) {
  throw new Error("Admin access required");
}
```

This project prioritizes **user experience**, **security**, and **maintainable code**. Every feature should feel intuitive for B2B users while maintaining robust data protection and role-based access control.
