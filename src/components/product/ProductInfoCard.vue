<template>
    <div class="bg-white rounded-xl shadow-sm border border-gray-100">
        <!-- Tab Navigation -->
        <div class="border-b border-gray-200">
            <nav class="flex">
                <button v-for="tab in tabs" :key="tab.id" @click="activeTab = tab.id" :class="[
                    activeTab === tab.id
                        ? 'border-blue-500 text-blue-600 bg-blue-50'
                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',
                    'flex-1 py-4 px-6 text-sm font-medium border-b-2 transition-colors focus:outline-none'
                ]">
                    <div class="flex items-center justify-center">
                        <svg v-if="tab.id === 'specifications'" class="w-4 h-4 mr-2" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <svg v-else class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        {{ tab.name }}
                    </div>
                </button>
            </nav>
        </div>

        <!-- Tab Content -->
        <div class="p-6">
            <Transition name="fade" mode="out-in">
                <!-- Specifications Tab -->
                <div v-if="activeTab === 'specifications'" key="specifications">
                    <div v-if="specifications && specifications.length > 0" class="space-y-1">
                        <div v-for="(spec, index) in specifications" :key="index"
                            class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100 last:border-b-0">
                            <span class="text-sm font-medium text-gray-600 col-span-1">{{ spec.key }}</span>
                            <span class="text-sm text-gray-900 col-span-2">{{ spec.value }}</span>
                        </div>
                    </div>
                    <div v-else class="text-center py-8 text-gray-500">
                        <svg class="w-10 h-10 mx-auto mb-3 text-gray-300" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <p class="text-sm">No specifications available</p>
                    </div>
                </div>

                <!-- Details Tab -->
                <div v-else-if="activeTab === 'details'" key="details">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1">
                        <!-- Left Column -->
                        <div class="space-y-1">
                            <div v-if="product.category" class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-600 col-span-1">Category</span>
                                <span class="text-sm text-gray-900 col-span-2">{{ product.category }}</span>
                            </div>
                            <div v-if="product.brand" class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-600 col-span-1">Brand</span>
                                <span class="text-sm text-gray-900 col-span-2">{{ product.brand }}</span>
                            </div>
                            <div v-if="product.weight" class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-600 col-span-1">Weight</span>
                                <span class="text-sm text-gray-900 col-span-2">{{ product.weight }} kg</span>
                            </div>
                            <div v-if="product.unit" class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-600 col-span-1">Unit</span>
                                <span class="text-sm text-gray-900 col-span-2">{{ product.unit }}</span>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="space-y-1">
                            <div v-if="product.dimensions" class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-600 col-span-1">Dimensions</span>
                                <span class="text-sm text-gray-900 col-span-2">
                                    {{ product.dimensions.length }} × {{ product.dimensions.width }} × {{
                                        product.dimensions.height }} cm
                                </span>
                            </div>
                            <div v-if="product.minOrderQuantity"
                                class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-600 col-span-1">Min Order</span>
                                <span class="text-sm text-gray-900 col-span-2">{{ product.minOrderQuantity }} {{
                                    product.unit || 'pieces' }}</span>
                            </div>
                            <div v-if="product.maxOrderQuantity"
                                class="grid grid-cols-3 gap-3 py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-600 col-span-1">Max Order</span>
                                <span class="text-sm text-gray-900 col-span-2">{{ product.maxOrderQuantity }} {{
                                    product.unit || 'pieces' }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Show message if no details available -->
                    <div v-if="!hasAnyDetails" class="text-center py-8 text-gray-500">
                        <svg class="w-10 h-10 mx-auto mb-3 text-gray-300" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p class="text-sm">No additional details available</p>
                    </div>
                </div>
            </Transition>
        </div>
    </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue';
import type { Product } from '../../types/product';

interface Specification {
    key: string;
    value: string;
}

interface Props {
    product: Product;
    specifications?: Specification[];
}

const props = withDefaults(defineProps<Props>(), {
    specifications: () => []
});

const activeTab = ref('specifications');

const tabs = [
    { id: 'specifications', name: 'Specifications' },
    { id: 'details', name: 'Details' }
];

const hasAnyDetails = computed(() => {
    return !!(
        props.product.category ||
        props.product.brand ||
        props.product.weight ||
        props.product.unit ||
        props.product.dimensions ||
        props.product.minOrderQuantity ||
        props.product.maxOrderQuantity
    );
});
</script>

<style scoped>
.fade-enter-active,
.fade-leave-active {
    transition: opacity 0.2s ease-in-out;
}

.fade-enter-from,
.fade-leave-to {
    opacity: 0;
}
</style>
